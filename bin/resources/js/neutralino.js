var Neutralino=function(e){"use strict";function t(e,t){return new Promise(((n,r)=>{let o=new CustomEvent(e,{detail:t});window.dispatchEvent(o),n()}))}var n=Object.freeze({__proto__:null,on:function(e,t){return new Promise(((n,r)=>{window.addEventListener(e,t),n()}))},off:function(e,t){return new Promise(((n,r)=>{window.removeEventListener(e,t),n()}))},dispatch:t});let r,o={};function i(e,n){return new Promise(((i,u)=>{if(r.readyState!=WebSocket.OPEN){let e={code:"NE_CL_NSEROFF",message:"Neutralino server is offline. Try restarting the application"};return t("serverOffline",e),u(e)}const a="10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))),s=window.NL_TOKEN;o[a]={resolve:i,reject:u},r.send(JSON.stringify({id:a,method:e,data:n,accessToken:s}))}))}var u,a,s=Object.freeze({__proto__:null,createDirectory:function(e){return i("filesystem.createDirectory",{path:e})},removeDirectory:function(e){return i("filesystem.removeDirectory",{path:e})},writeFile:function(e,t){return i("filesystem.writeFile",{path:e,data:t})},writeBinaryFile:function(e,t){let n=new Uint8Array(t),r="";for(let e of n)r+=String.fromCharCode(e);return i("filesystem.writeBinaryFile",{path:e,data:window.btoa(r)})},readFile:function(e){return i("filesystem.readFile",{path:e})},readBinaryFile:function(e){return new Promise(((t,n)=>{i("filesystem.readBinaryFile",{path:e}).then((e=>{let n=window.atob(e),r=n.length,o=new Uint8Array(r);for(let e=0;e<r;e++)o[e]=n.charCodeAt(e);t(o.buffer)})).catch((e=>{n(e)}))}))},removeFile:function(e){return i("filesystem.removeFile",{path:e})},readDirectory:function(e){return i("filesystem.readDirectory",{path:e})},copyFile:function(e,t){return i("filesystem.copyFile",{source:e,destination:t})},moveFile:function(e,t){return i("filesystem.moveFile",{source:e,destination:t})},getStats:function(e){return i("filesystem.getStats",{path:e})}});!function(e){e.WARNING="WARNING",e.ERROR="ERROR",e.INFO="INFO",e.QUESTION="QUESTION"}(u||(u={})),function(e){e.OK="OK",e.OK_CANCEL="OK_CANCEL",e.YES_NO="YES_NO",e.YES_NO_CANCEL="YES_NO_CANCEL",e.RETRY_CANCEL="RETRY_CANCEL",e.ABORT_RETRY_IGNORE="ABORT_RETRY_IGNORE"}(a||(a={}));var c=Object.freeze({__proto__:null,get Icon(){return u},get MessageBoxChoice(){return a},execCommand:function(e,t){return i("os.execCommand",Object.assign({command:e},t))},getEnv:function(e){return i("os.getEnv",{key:e})},showOpenDialog:function(e,t){return i("os.showOpenDialog",Object.assign({title:e},t))},showFolderDialog:function(e){return i("os.showFolderDialog",{title:e})},showSaveDialog:function(e,t){return i("os.showSaveDialog",Object.assign({title:e},t))},showNotification:function(e,t,n){return i("os.showNotification",{title:e,content:t,icon:n})},showMessageBox:function(e,t,n,r){return i("os.showMessageBox",{title:e,content:t,choice:n,icon:r})},setTray:function(e){return i("os.setTray",e)},open:function(e){return i("os.open",{url:e})},getPath:function(e){return i("os.getPath",{name:e})}});var l=Object.freeze({__proto__:null,getMemoryInfo:function(){return i("computer.getMemoryInfo")}});var d,f=Object.freeze({__proto__:null,setData:function(e,t){return i("storage.setData",{key:e,data:t})},getData:function(e){return i("storage.getData",{key:e})}});!function(e){e.WARNING="WARNING",e.ERROR="ERROR",e.INFO="INFO"}(d||(d={}));var w=Object.freeze({__proto__:null,get LoggerType(){return d},log:function(e,t){return i("debug.log",{message:e,type:t})}});function m(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((r=r.apply(e,t||[])).next())}))}function p(){return i("app.keepAlive")}var g=Object.freeze({__proto__:null,exit:function(e){return i("app.exit",{code:e})},killProcess:function(){return i("app.killProcess")},restartProcess:function(e){return new Promise(((t,n)=>m(this,void 0,void 0,(function*(){let n=window.NL_ARGS.reduce(((e,t,n)=>e+=" "+t),"");e.args&&(n+=" "+e.args),yield Neutralino.os.execCommand(n,{shouldRunInBackground:!0}),Neutralino.app.exit(),t()}))))},keepAlive:p,getConfig:function(){return i("app.getConfig")}});var v=Object.freeze({__proto__:null,setTitle:function(e){return i("window.setTitle",{title:e})},maximize:function(){return i("window.maximize")},unmaximize:function(){return i("window.unmaximize")},isMaximized:function(){return i("window.isMaximized")},minimize:function(){return i("window.minimize")},setFullScreen:function(){return i("window.setFullScreen")},exitFullScreen:function(){return i("window.exitFullScreen")},isFullScreen:function(){return i("window.isFullScreen")},show:function(){return i("window.show")},hide:function(){return i("window.hide")},isVisible:function(){return i("window.isVisible")},focus:function(){return i("window.focus")},setIcon:function(e){return i("window.setIcon",{icon:e})},move:function(e,t){return i("window.move",{x:e,y:t})},setDraggableRegion:function(e){return new Promise(((t,n)=>{let r=document.getElementById(e),o=0,i=0;function u(e){return m(this,void 0,void 0,(function*(){yield Neutralino.window.move(e.screenX-o,e.screenY-i)}))}r||n(`Unable to find dom element: #${e}`),r.addEventListener("pointerdown",(e=>{o=e.clientX,i=e.clientY,r.addEventListener("pointermove",u),r.setPointerCapture(e.pointerId)})),r.addEventListener("pointerup",(e=>{r.removeEventListener("pointermove",u),r.releasePointerCapture(e.pointerId)})),t()}))},setSize:function(e){return i("window.setSize",e)},create:function(e,t){return new Promise(((n,r)=>{function o(e){return"string"!=typeof e||(e=e.trim()).includes(" ")&&(e=`"${e}"`),e}let i=window.NL_ARGS.reduce(((e,t,n)=>((t.includes("--path=")||t.includes("--debug-mode")||t.includes("--load-dir-res")||0==n)&&(e+=" "+o(t)),e)),"");i+=" --url="+o(e);for(let e in t){if("processArgs"==e)continue;i+=` --window${e.replace(/[A-Z]|^[a-z]/g,(e=>"-"+e.toLowerCase()))}=${o(t[e])}`}t&&t.processArgs&&(i+=" "+t.processArgs),Neutralino.os.execCommand(i,{shouldRunInBackground:!0}).then((()=>{n()})).catch((e=>{r(e)}))}))}});function _(){setInterval((()=>m(this,void 0,void 0,(function*(){try{let e=yield fetch("http://localhost:5050");JSON.parse(yield e.text()).needsReload&&location.reload()}catch(e){console.error("Unable to communicate with neu devServer")}}))),1e3)}return e.app=g,e.computer=l,e.debug=w,e.events=n,e.filesystem=s,e.init=function(){if(r=new WebSocket(`ws://${window.location.hostname}:${window.NL_PORT}`),r.addEventListener("message",(e=>{const n=JSON.parse(e.data);n.id&&n.id in o?(n.data.error?o[n.id].reject(n.data.error):n.data.success&&o[n.id].resolve(n.data.returnValue?n.data.returnValue:n.data),delete o[n.id]):n.event&&t(n.event,n.data)})),window.NL_MODE&&"browser"==window.NL_MODE&&function(){setInterval((()=>m(this,void 0,void 0,(function*(){try{yield p()}catch(e){console.error("Unable to keep Neutralino server online. The server is not reachable.")}}))),5e3)}(),void 0!==window.NL_ARGS)for(let e=0;e<window.NL_ARGS.length;e++)if("--debug-mode"==window.NL_ARGS[e]){_();break}window.NL_CVERSION="1.5.0"},e.os=c,e.storage=f,e.window=v,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
